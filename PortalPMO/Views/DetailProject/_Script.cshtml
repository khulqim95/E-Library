<script type="text/javascript">
    var State = '';
    var ProjectId;
    var StateTempClient = "";
    var StateTempRelasiProject = "";
    var StateTempAnggotaTim = "";
    var StateTempNotes = "";

    var TableClient;
    var TableRelasiProject;
    var TableAnggotaTim;
    var TableFileRepository;
    var TableNotes;
    var TableProgressKerja;


    var dataFileLampiran = [
        {
            "Number": 1,
            "Id": 1,
            "Nama": "Memo 1",
            "JenisLampiran": "Dokumen Memo",
            "Keterangan": "Memo",
            "UploadedBy": "Andini",
            "TanggalUpload": "12 Agustus 2020"
        },
        {
            "Number": 1,
            "Id": 1,
            "Nama": "Dokumen QA 1 1",
            "JenisLampiran": "Dokumen QA",
            "Keterangan": "Dokumen QA",
            "UploadedBy": "Untung",
            "TanggalUpload": "20 Agustus 2020"
        }
    ]

    var dataNotes = [
        {
            "Number": 1,
            "Id": 1,
            "Npp": "222",
            "Nama": "Joni Andre",
            "Judul": "Project Manager Notes",
            "Keterangan": "Berisi Notes dari project manager",
            "Images": "../plugin/architectui/content/assets/images/avatars/10.jpg",
            "Tanggal": "12 Agustus 2020 08:00:10"
        },
        {
            "Number": 2,
            "Id": 1,
            "Npp": "444",
            "Nama": "Untung Bagio",
            "Judul": "Notes 2",
            "Keterangan": "Berisi Notes dari QA",
            "Images": "../plugin/architectui/content/assets/images/avatars/2.jpg",
            "Tanggal": "20 Agustus 2020 08:00:10"
        },
        {
            "Number": 3,
            "Id": 1,
            "Npp": "888",
            "Nama": "Wahono",
            "Judul": "Notes 3",
            "Keterangan": "Berisi Notes dari Dev",
            "Images": "../plugin/architectui/content/assets/images/avatars/10.jpg",
            "Tanggal": "20 Agustus 2020 08:00:10"
        }
    ]

    var dataLogHistory = [
        {
            "Number": 1,
            "Id": 1,
            "NppFrom": "222",
            "NamaFrom": "Joni Andre",
            "FlowProses": "Assign development to testing",
            "NppTo": "999",
            "NamaTo": "Untung Wahono",
            "Keterangan": "Prroses development sudah selesai, mohon untuk di lakukan testing aplikasi",
            "Images": "../plugin/architectui/content/assets/images/avatars/4.jpg",
            "Tanggal": "12 Agustus 2020 08:00:10"
        },
        {
            "Number": 2,
            "Id": 1,
            "NppFrom": "222",
            "NamaFrom": "Joni Andre",
            "FlowProses": "Assign development to testing",
            "NppTo": "999",
            "NamaTo": "Untung Wahono",
            "Keterangan": "Prroses development sudah selesai, mohon untuk di lakukan testing aplikasi",
            "Images": "../plugin/architectui/content/assets/images/avatars/9.jpg",
            "Tanggal": "12 Agustus 2020 08:00:10"
        }
    ]



    $(document).ready(function () {
        $.fn.datepicker.language['en'] = {
            days: ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'],
            daysShort: ['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'],
            daysMin: ['Mn', 'Sn', 'Sl', 'Rb', 'Km', 'Jm', 'Sa'],
            months: ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'],
            monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec'],
            today: 'Today',
            clear: 'Clear',
            dateFormat: 'dd/mm/yyyy',
            firstDay: 0
        };

        ValidationForm();
        $("input[name=IsActive][value=True]").prop("checked", true);
        ProjectId = @Html.Raw(ViewBag.ProjectId)

        CreateContentTanggaDefaultValuel("TanggalMemo");
        CreateContentTanggaDefaultValuel("TanggalKlarifikasi");
        CreateContentTanggaDefaultValuel("TanggalDisposisi");
        CreateContentTanggaDefaultValuel("TanggalEstimasiProduction");
        CreateContentTanggaDefaultValuel("TanggalDrf");

        RangeDateDefaultDefaultValue('TanggalEstimasiDone');
        RangeDateDefaultDefaultValue('TanggalEstimasiDevelopment');
        RangeDateDefaultDefaultValue('TanggalEstimasiTesting');
        RangeDateDefaultDefaultValue('TanggalEstimasiPiloting');
        RangeDateDefaultDefaultValue('TanggalEstimasiPir');

        DropdownKompleksitasProjectServerSide("KompleksitasProjectId", "100", false);
        DropdownKlasifikasiProjectServerSide("KlasifikasiProjectId", "100", false);
        DropdownSkorProjectServerSide("SkorProjectId", "100", false);
        DropdownKategoriProjectServerSide("KategoriProjectId", "100", false);
        var KategoriProjectId = $("#KategoriProjectId").val();
        DropdownSubKategoriProjectServerSide("SubKategoriProjectId", "100", false, KategoriProjectId)

        $('#SummernoteDetailReq').summernote({
            placeholder: 'Masukkan Diskripsi Project',
            tabsize: 2,
            height: 300,
            toolbar: [
                ['style', ['style']],
                ['font', ['bold', 'underline', 'clear']],
                ['color', ['color']],
                ['para', ['ul', 'ol', 'paragraph']],
                ['table', ['table']],
                ['insert', ['link', 'picture', 'video']],
                ['view', ['fullscreen', 'codeview', 'help']]
            ]
        });
        $('#SummernoteDetailReq').summernote('code', $("#DetailRequirment").val());

    });

    //Untuk Validasi Form data Pinjaman
    function ValidationForm() {
        //Untuk validasi form
        var $validator = $("#FormData").validate({
            ignore: [],
            rules: {
                Nama: {
                    required: true
                },
                DetailRequirment: {
                    required: true
                },
                NoMemo: {
                    required: true
                },
                TanggalMemo: {
                    required: true
                },
                TanggalKlarifikasi: {
                    required: true
                },
                TanggalDisposisi: {
                    required: true
                },
                TanggalEstimasiDone: {
                    required: true
                },
                NoDrf: {
                    required: true
                },
                TanggalDrf: {
                    required: true
                },
                FileMemo: {
                    required: true
                },
                FileNotulen: {
                    required: true
                },
                FileDRF: {
                    required: true
                },
                FileNotulen: {
                    required: true
                }
            },
            messages: {

            },

            highlight: function (element) {
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            },
            unhighlight: function (element) {
                $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function (error, element) {
                if (element.is('textarea')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                } else if (element.is(':radio')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                }
                else if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                }
                else {
                    error.insertAfter(element);
                }
            }
        });
        $.validator.messages.required = "Harap isi field ini terlebih dahulu!";

        //check apakah form sudah valid atau belum
        $('#BtnSubmit').click(function () {
            var url = '';
            var $valid = $("#FormData").valid();
            if (!$valid) {
                //alert("False");
                $validator.focusInvalid();
                return false;
            } else {
                var plaintext = $("#SummernoteDetailReq").summernote("code");
                $("#DetailRequirment").val(plaintext)
                url = '../DataProject/SubmitEdit';
                //Cek session terlebih dahulu
                $.ajax({
                    type: 'GET',
                    url: '../Login/CekSession',
                    success: function (hasil) {
                        if (hasil == true) {
                            $.ajax({
                                url: url,
                                type: 'POST',
                                data: $('#FormData').serialize(),
                                success: function (d) {
                                    //Tampilkan alert status
                                    if (d == "") {
                                        NotifikasiSukses("Sukses", "Data berhasil disimpan!");
                                        window.location.href = "../DataProject/Index";
                                    } else {
                                        NotifikasiError("Error", d)
                                    }
                                }
                            });
                        }
                        else {
                            window.location.href = "../Login/Login?a=true";
                        }
                    }
                });
            }
        });
    }

    function LoadContentClient() {
        ShowModal('bd-example-modal-lg');
        State = "create";
        UrlPartialView = '../DetailProject/LoadContentClient';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        document.getElementById("ContentTab1").innerHTML = data;
                        LoadTableClient();
                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function LoadContentDepedencyProject() {
        ShowModal('bd-example-modal-lg');
        State = "create";
        UrlPartialView = '../DetailProject/LoadContentDepedencyProject';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        document.getElementById("ContentTab2").innerHTML = data;
                        LoadTableDepedencyProject();
                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function LoadContentAnggotaTim() {
        ShowModal('bd-example-modal-lg');
        State = "create";
        UrlPartialView = '../DetailProject/LoadContentAnggotaTim';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        document.getElementById("ContentTab3").innerHTML = data;
                        LoadTableanggotaTim();
                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function LoadContentFileRepository() {
        ShowModal('bd-example-modal-lg');
        State = "create";
        UrlPartialView = '../DetailProject/LoadContentFileRepository';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        document.getElementById("ContentTab4").innerHTML = data;
                        LoadTableFileRepository();
                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function LoadContentNotes() {
        ShowModal('bd-example-modal-lg');
        State = "create";
        UrlPartialView = '../DetailProject/LoadContentNotes';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        document.getElementById("ContentTab5").innerHTML = data;
                        LoadTableNotes();
                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function LoadContentLogHistory() {
        ShowModal('bd-example-modal-lg');
        State = "create";
        UrlPartialView = '../DetailProject/LoadContentLogHistory';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        document.getElementById("ContentTab6").innerHTML = data;
                        GetAllDataLog();
                        //LoadTableLogHistory();
                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function LoadTableClient() {
        TableClient = $('#TableClient').DataTable({
            fixedHeader: {
                header: true
            },
            pageLength: 10,
            destroy: true,
            orderCellsTop: true,
            responsive: true,
            processing: true, // untuk menampilkan bar prosessing
            serverSide: false, // untuk proses server side datatable harus diset true
            orderMulti: false, // untuk disable multi order column
            retrieve: true,
            //autoWidth: true,
            dom: '<"top"i>rt<"bottom"lp><"clear">', // untuk menghilangkan search global
            //data: dataClient,
            ajax: {
                "url": '../DetailProject/LoadDataClientCreate',
                "type": "POST",
                "data": { "ProjectId": ProjectId},
                "datatype": "json",
                error: function (jqXHR, textStatus, errorThrown) {
                    window.location.href = "../Error/HttpStatusErrorLayout?statusCode=500"
                }
            },
            language: {
                processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ',
                info: "Menampilkan _START_ Sampai _END_ Dari _TOTAL_ Data",
                paginate: {
                    first: "Halaman Awal",
                    last: "Halaman Akhir",
                    previous: "Halaman Sebelumnya",
                    next: "Halaman Selanjutnya",
                },
                lengthMenu: "Menampilkan _MENU_ Data",
                emptyTable: "Data tidak ditemukan",
                infoEmpty: "Menampilkan 0 Sampai 0 Dari 0 Data",
                zeroRecords: "Data tidak ditemukan"
            },
            columns: [
                { responsivePriority: 1, "data": null, "name": null },
                {
                    responsivePriority: 2,
                    "data": "Id", "name": "Id", "orderable": false, "visible": true, "render": function (data, type, full, meta) {
                        return '<div class="btn-group"><a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-edit" onclick="EditClient(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Ubah Data"><i class="fa fa-edit btnEdit"></i></a>'
                            + '<a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-view" onclick="ViewClient(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="View Data"><i class="fa fa-eye btnView"></i></a>'
                            + '<a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-delete" onclick="DeleteClient(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Delete Data"><i class="fa fa-trash btnDelete"></i></a></div>'
                    }
                },
                { responsivePriority: 3, "data": "Client", "name": "Client" },
                { responsivePriority: 4, "data": "NppPic", "name": "NppPic" },
                { responsivePriority: 5, "data": "NamaPic", "name": "NamaPic" },
                { responsivePriority: 7, "data": "Email", "name": "Email" },
                { responsivePriority: 6, "data": "NoHp", "name": "NoHp" },
                { responsivePriority: 8, "data": "Keterangan", "name": "Keterangan" }
                
            ],
            "order": [[1, "desc"]]
        });

        TableClient.on('order.dt search.dt', function () {
            TableClient.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                cell.innerHTML = i + 1;
            });
        }).draw();
    }

    function LoadTableDepedencyProject() {
        TableRelasiProject = $('#TableDepedencyProject').DataTable({
            fixedHeader: {
                header: true
            },
            pageLength: 10,
            destroy: true,
            orderCellsTop: true,
            responsive: true,
            processing: true, // untuk menampilkan bar prosessing
            serverSide: false, // untuk proses server side datatable harus diset true
            orderMulti: false, // untuk disable multi order column
            retrieve: true,
            //autoWidth: true,
            dom: '<"top"i>rt<"bottom"lp><"clear">', // untuk menghilangkan search global
            //data: dataDependencyProject,
            ajax: {
                "url": '../DetailProject/LoadDataDepedencyProject',
                "type": "POST",
                "data": { "ProjectId": ProjectId },
                "datatype": "json",
                error: function (jqXHR, textStatus, errorThrown) {
                    window.location.href = "../Error/HttpStatusErrorLayout?statusCode=500"
                }
            },
            language: {
                processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ',
                info: "Menampilkan _START_ Sampai _END_ Dari _TOTAL_ Data",
                paginate: {
                    first: "Halaman Awal",
                    last: "Halaman Akhir",
                    previous: "Halaman Sebelumnya",
                    next: "Halaman Selanjutnya",
                },
                lengthMenu: "Menampilkan _MENU_ Data",
                emptyTable: "Data tidak ditemukan",
                infoEmpty: "Menampilkan 0 Sampai 0 Dari 0 Data",
                zeroRecords: "Data tidak ditemukan"
            },
            columns: [
                { responsivePriority: 1, "data": null, "name": null },
                {
                    responsivePriority: 2,
                    "data": "Id", "name": "Id", "orderable": false, "visible": true, "render": function (data, type, full, meta) {
                        return '<div class="btn-group"><a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-edit" onclick="EditRelasiProject(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Ubah Data"><i class="fa fa-edit btnEdit"></i></a>'
                            + '<a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-view" onclick="ViewRelasiProject(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="View Data"><i class="fa fa-eye btnView"></i></a>'
                            + '<a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-delete" onclick="DeleteRelasiProject(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Delete Data"><i class="fa fa-trash btnDelete"></i></a></div>'
                    }
                },
                { responsivePriority: 3, "data": "ProjectNo", "name": "ProjectNo" },
                { responsivePriority: 4, "data": "NamaProject", "name": "NamaProject" },
                { responsivePriority: 5, "data": "Keterangan", "name": "Keterangan" }
            ],
            "order": [[1, "desc"]]
        });
        TableRelasiProject.on('order.dt search.dt', function () {
            TableRelasiProject.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                cell.innerHTML = i + 1;
            });
        }).draw();
    }

    function LoadTableanggotaTim() {
        TableAnggotaTim = $('#TableAnggotaTim').DataTable({
            fixedHeader: {
                header: true
            },
            pageLength: 10,
            destroy: true,
            orderCellsTop: true,
            responsive: true,
            scrollX: true,
            processing: true, // untuk menampilkan bar prosessing
            serverSide: false, // untuk proses server side datatable harus diset true
            orderMulti: false, // untuk disable multi order column
            retrieve: true,
            //autoWidth: true,
            dom: '<"top"i>rt<"bottom"lp><"clear">', // untuk menghilangkan search global
            //data: dataAnggotaTim,
            ajax: {
                "url": '../DetailProject/LoadDataAnggotaTim',
                "type": "POST",
                "data": { "ProjectId": ProjectId },
                "datatype": "json",
                error: function (jqXHR, textStatus, errorThrown) {
                    window.location.href = "../Error/HttpStatusErrorLayout?statusCode=500"
                }
            },
            language: {
                processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ',
                info: "Menampilkan _START_ Sampai _END_ Dari _TOTAL_ Data",
                paginate: {
                    first: "Halaman Awal",
                    last: "Halaman Akhir",
                    previous: "Halaman Sebelumnya",
                    next: "Halaman Selanjutnya",
                },
                lengthMenu: "Menampilkan _MENU_ Data",
                emptyTable: "Data tidak ditemukan",
                infoEmpty: "Menampilkan 0 Sampai 0 Dari 0 Data",
                zeroRecords: "Data tidak ditemukan"
            },
            columns: [
                { responsivePriority: 1, "data": null, "name": null },
                {
                    responsivePriority: 2,
                    "data": "Id", "name": "Id", "orderable": false, "visible": true, "render": function (data, type, full, meta) {
                        return '<div class="btn-group"><a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-edit" onclick="EditAnggotaTim(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Ubah Data"><i class="fa fa-edit btnEdit"></i></a>'
                            + '<a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-view" onclick="ViewDetailProgressAnggotaTim(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Lihat Progres Pekerjaan"><i class="fa fa-clipboard btnView"></i></a>'
                            + '<a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-view" onclick="ViewAnggotaTim(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="View Data"><i class="fa fa-eye btnView"></i></a>'
                            + '<a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-delete" onclick="DeleteAnggotaTim(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Delete Data"><i class="fa fa-trash btnDelete"></i></a></div>'
                    }
                },
                {
                    responsivePriority: 3,
                    "data": "Images", "name": "Images", "orderable": false, "visible": true, "render": function (data, type, full, meta) {
                        return '<img width="42" class="rounded-circle" src="'+data+'" alt="'+full.Nama+'">'
                    }
                },
                { responsivePriority: 4, "data": "JobPosisi", "name": "JobPosisi" },
                { responsivePriority: 5, "data": "Npp", "name": "Npp" },
                { responsivePriority: 6, "data": "Nama", "name": "Nama" },
                { responsivePriority: 8, "data": "Unit", "name": "Unit" },
                { responsivePriority: 8, "data": "Email", "name": "Email" },
                { responsivePriority: 9, "data": "Telepon", "name": "Telepon" },
                { responsivePriority: 11, "data": "TanggalTargetPenyelesaianAnggotaTim", "name": "TanggalTargetPenyelesaianAnggotaTim" },
                { responsivePriority: 7, "data": "Sisa", "name": "Sisa" },
                { responsivePriority: 7, "data": "TanggalPenyelesaian", "name": "TanggalPenyelesaian" },
                { responsivePriority: 7, "data": "JumlahHariPengerjaan", "name": "JumlahHariPengerjaan" },
                //{ responsivePriority: 6, "data": "StatusDoneProject", "name": "StatusDoneProject" },
                {
                    responsivePriority: 6, "data": "StatusDoneProject", "name": "StatusDoneProject",
                    "render": function (data, type, full, meta) {
                        if (full.Warna == 'Kuning') {
                            return '<p class="mt-2 btn btn-warning disabled"><b>' + data + '</b></p>'
                        }
                        else if (full.Warna == 'Biru') {
                            return '<p class="mt-2 btn btn-info disabled"><b>' + data + '</b></p>'
                        }
                        else if (full.Warna == 'Hijau') {
                            return '<p class="mt-2 btn btn-success disabled"><b>' + data + '</b></p>'
                        }
                        else if (full.Warna == 'Merah') {
                            return '<p class="mt-2 btn btn-danger disabled"><b>' + data + '</b></p>'
                        }
                        else {
                            return '<p class="mt-2 btn disabled"><b>' + data + '</b></p>'
                        }
                    }
                },
                { responsivePriority: 13, "data": "Keterangan", "name": "Keterangan" },
                {
                    responsivePriority: 6, "data": "Status", "name": "Status",
                    "render": function (data, type, full, meta) {
                        if (data == 'Aktif') {
                            return '<p class="mt-2 btn btn-primary disabled"><b>' + data + '</b></p>'
                        }
                        else {
                            return '<p class="mt-2 btn btn-danger disabled"><b>' + data + '</b></p>'
                        }
                    }
                },
            ],
            "order": [[1, "desc"]]
        });

        TableAnggotaTim.on('order.dt search.dt', function () {
            TableAnggotaTim.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                cell.innerHTML = i + 1;
            });
        }).draw();
        TableAnggotaTim.columns.adjust().responsive.recalc();

    }

    function LoadTableFileRepository() {
        TableFileRepository = $('#TableFileRepository').DataTable({
            fixedHeader: {
                header: true
            },
            pageLength: 10,
            destroy: true,
            orderCellsTop: true,
            responsive: true,
            processing: true, // untuk menampilkan bar prosessing
            serverSide: false, // untuk proses server side datatable harus diset true
            orderMulti: false, // untuk disable multi order column
            retrieve: true,
            //autoWidth: true,
            dom: '<"top"i>rt<"bottom"lp><"clear">', // untuk menghilangkan search global
            //data: dataFileLampiran,
            ajax: {
                "url": '../DetailProject/LoadDataFileRepository',
                "type": "POST",
                "data": { "ProjectId": ProjectId },
                "datatype": "json",
                error: function (jqXHR, textStatus, errorThrown) {
                    window.location.href = "../Error/HttpStatusErrorLayout?statusCode=500"
                }
            },
            language: {
                processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ',
                info: "Menampilkan _START_ Sampai _END_ Dari _TOTAL_ Data",
                paginate: {
                    first: "Halaman Awal",
                    last: "Halaman Akhir",
                    previous: "Halaman Sebelumnya",
                    next: "Halaman Selanjutnya",
                },
                lengthMenu: "Menampilkan _MENU_ Data",
                emptyTable: "Data tidak ditemukan",
                infoEmpty: "Menampilkan 0 Sampai 0 Dari 0 Data",
                zeroRecords: "Data tidak ditemukan"
            },
            columns: [
                { responsivePriority: 1, "data": null, "name": null },
                {
                    responsivePriority: 2,
                    "data": "Id", "name": "Id", "orderable": false, "visible": true, "render": function (data, type, full, meta) {
                        return '<div class="btn-group"><a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-download" onclick="DownloadFileRepository(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Download File"><i class="fa fa-download"></i></a>'
                            + '<a href="javascript:void(0)" class="btn btn-small btn-facebook" id="button-delete" onclick="DeleteFileRepository(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Delete Data"><i class="fa fa-trash btnDelete"></i></a></div>'
                    }
                },
                { responsivePriority: 3, "data": "TypeDokumen", "name": "TypeDokumen" },
                { responsivePriority: 3, "data": "NamaFile", "name": "NamaFile" },
                { responsivePriority: 6, "data": "Keterangan", "name": "Keterangan" },
                { responsivePriority: 4, "data": "UploadBy", "name": "UploadBy" },
                { responsivePriority: 5, "data": "UploadTime", "name": "UploadTime" }
            ],
            "order": [[1, "desc"]]
        });

        TableFileRepository.on('order.dt search.dt', function () {
            TableFileRepository.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                cell.innerHTML = i + 1;
            });
        }).draw();
        TableFileRepository.columns.adjust().responsive.recalc();

    }

    function LoadTableNotes() {
        TableNotes = $('#TableNotes').DataTable({
            fixedHeader: {
                header: true
            },
            pageLength: 10,
            destroy: true,
            orderCellsTop: true,
            responsive: true,
            processing: true, // untuk menampilkan bar prosessing
            serverSide: false, // untuk proses server side datatable harus diset true
            orderMulti: false, // untuk disable multi order column
            retrieve: true,
            //autoWidth: true,
            dom: '<"top"i>rt<"bottom"lp><"clear">', // untuk menghilangkan search global
            //data: dataNotes,
            ajax: {
                "url": '../DetailProject/LoadDataNotes',
                "type": "POST",
                "data": { "ProjectId": ProjectId },
                "datatype": "json",
                error: function (jqXHR, textStatus, errorThrown) {
                    window.location.href = "../Error/HttpStatusErrorLayout?statusCode=500"
                }
            },
            language: {
                processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ',
                info: "Menampilkan _START_ Sampai _END_ Dari _TOTAL_ Data",
                paginate: {
                    first: "Halaman Awal",
                    last: "Halaman Akhir",
                    previous: "Halaman Sebelumnya",
                    next: "Halaman Selanjutnya",
                },
                lengthMenu: "Menampilkan _MENU_ Data",
                emptyTable: "Data tidak ditemukan",
                infoEmpty: "Menampilkan 0 Sampai 0 Dari 0 Data",
                zeroRecords: "Data tidak ditemukan"
            },
            "drawCallback": function (settings) {
                $("#TableNotes thead").remove();
            },   
            columns: [
                { responsivePriority: 1, "data": null, "name": null, visible:false },
                {
                    responsivePriority: 2,
                    "data": "Id", "name": "Id", "orderable": false, "visible": true, "render": function (data, type, full, meta) {
                        return '<div class="widget-content p-0">'
                                                +'<div class="widget-content-wrapper">'
                                                    +'<div class="widget-content" style="min-width:100%">'
                                                        +'<div class="widget-heading">'
                                                            +'<img width="42" class="rounded-circle" src="'+full.Images+'" alt="">'
                                                            +'<span style="font-size:10px; font-weight:bold;margin-left: 20px;">'+full.CreatedDate+'</span><br />'
                                                            +'<p style="margin-left: 60px">'+full.Npp+' - '+full.NamaPegawai+'</p>'
                                                            +'<p style="margin-top:-15px;margin-left: 60px">'+full.Judul+'</p>'
                                                        +'</div>'
                                                    + '<a href="javascript:void(0)" class="btn btn-small btn-facebook pull-right" id="button-editNotes" onclick="EditNotes(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Edit Notes"><i class="fa fa-edit"></i>'
                                                    + '<a href="javascript:void(0)" class="btn btn-small btn-facebook pull-right" id="button-deletenotes" onclick="DeleteNotes(' + full.Id + ')" style="margin-right:5px;" data-toggle="tooltip" title="Hapus Notes"><i class="fa fa-trash"></i>'
                                                       +'</div>'
                                                    + '</div>'
                                                +'</div>'
                                            +'</div>'
                    }
                }
            ]
        });
        TableNotes.on('order.dt search.dt', function () {
            TableNotes.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                cell.innerHTML = i + 1;
            });
        }).draw();
        TableNotes.columns.adjust().responsive.recalc();
    }

    function LoadTableLogHistory() {
        var TableLogHistory = $('#TableLogHistory').DataTable({
            fixedHeader: {
                header: true
            },
            pageLength: 10,
            destroy: true,
            orderCellsTop: true,
            responsive: true,
            processing: true, // untuk menampilkan bar prosessing
            serverSide: false, // untuk proses server side datatable harus diset true
            orderMulti: false, // untuk disable multi order column
            retrieve: true,
            //autoWidth: true,
            dom: '<"top"i>rt<"bottom"lp><"clear">', // untuk menghilangkan search global
            data: dataLogHistory,
            language: {
                processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ',
                info: "Menampilkan _START_ Sampai _END_ Dari _TOTAL_ Data",
                paginate: {
                    first: "Halaman Awal",
                    last: "Halaman Akhir",
                    previous: "Halaman Sebelumnya",
                    next: "Halaman Selanjutnya",
                },
                lengthMenu: "Menampilkan _MENU_ Data",
                emptyTable: "Data tidak ditemukan",
                infoEmpty: "Menampilkan 0 Sampai 0 Dari 0 Data",
                zeroRecords: "Data tidak ditemukan"
            },
            "drawCallback": function (settings) {
                $("#TableNotes thead").remove();
            },
            columns: [
                {
                    responsivePriority: 2,
                    "data": "Id", "name": "Id", "orderable": false, "visible": true, "render": function (data, type, full, meta) {
                        return '<div class="widget-content p-0">'
                            + '<div class="widget-content-wrapper">'
                            + '<div class="widget-content-left">'
                            + '<div class="widget-heading">'
                            + '<img width="42" class="rounded-circle" src="' + full.Images + '" alt="">'
                            + '<span style="font-size:8px; font-weight:bold;margin-left: 20px;">' + full.Tanggal + '</span><br />'
                            + '<p style="margin-left: 60px">From (' + full.NppFrom + ' - ' + full.NamaFrom + ') To (' + full.NppTo + ' - ' + full.NamaTo +'</p>'
                            + '<p style="margin-top:-15px;margin-left: 60px">' + full.FlowProses + '</p>'
                            + '</div>'
                            + '<div class="widget-subheading" style="margin-top:-15px;margin-left: 60px"><i>' + full.Keterangan + '/i></div>'
                            + '</div>'
                            + '</div>'
                            + '</div>'
                    }
                }
            ]
        });
    }

    function CreateClient() {
        ShowModal('bd-example-modal-lg');
        State = "create";
        UrlPartialView = '../DetailProject/CreateClient';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');

                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        ValidationFormClient();
                        DropdownClientServerSide("ClientId", "100", false)
                        $("input[name=IsActive][value=True]").prop("checked", true);
                        $('#Keterangan').summernote({
                            placeholder: 'Masukkan Keterangan',
                            height: 200,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });
                        $("#Keterangan").summernote("code", "");

                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    //--***************************************START EDIT ******************************************//
    function EditClient(Id) {
        ShowModal('bd-example-modal-lg');

        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    //ShowModal('bd-example-modal-lg');

                    StateTempClient = "edit";
                    SearchData = { "Id": Id }
                    UrlPartialView = '../DetailProject/EditClient';
                    LoadPartialViewData(UrlPartialView, function (data) {
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        DropdownClientServerSide("ClientId", "100", false)
                        ValidationFormClient();
                        $('#Keterangan').summernote({
                            placeholder: 'Masukkan Keterangan',
                            height: 200,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });

                    }, SearchData);
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });

    }
    //--***************************************END EDIT ******************************************//


    //--***************************************START VIEW ******************************************//
    function ViewClient(Id) {
        ShowModal('bd-example-modal-lg');

        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    //ShowModal('bd-example-modal-lg');
                    StateTempClient = "view";
                    SearchData = { "Id": Id }
                    UrlPartialView = '../DetailProject/ViewClient';
                    LoadPartialViewData(UrlPartialView, function (data) {
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        $('#Keterangan').summernote({
                            placeholder: 'Masukkan Keterangan',
                            height: 200,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });
                        $("#FormDataClient :input").prop("disabled", true);
                        $('#Keterangan').summernote('disable');
                        $("#BtnSubmitUser").hide();
                    }, SearchData);
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });

    }
    //--***************************************END VIEW ******************************************//

    //--***************************************START DELETE ******************************************//
    function DeleteClient(Id) {
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    listSelected = [];
                    State = "delete";
                    swal({
                        title: "Konfirmasi",
                        text: "Apakah Anda yakin ingin menghapus data ini?",
                        icon: "warning",
                        buttons: true,
                        dangerMode: true,
                    })
                        .then((willDelete) => {
                            if (willDelete) {
                                $.ajax({
                                    url: '../DetailProject/DeleteClient',
                                    type: 'POST',
                                    data: { "Ids": Id },
                                    success: function (d) {
                                        if (d == "") {
                                            NotifikasiSukses("Sukses", "Data berhasil dihapus!");
                                        } else {
                                            NotifikasiError("Error", "Data gagal dihapus!")
                                        }
                                        TableClient.ajax.reload();
                                    }
                                });
                            }
                        });
                    return false;
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });


       
    }
    //--***************************************END DELETE ******************************************//

    //Untuk Validasi Form data
    function ValidationFormClient() {
        //Untuk validasi form
        var $validator = $("#FormDataClient").validate({
            ignore: [],
            rules: {
                ClientId: {
                    required: true
                },
                NppPic: {
                    required: true
                },
                NamaPic: {
                    required: true
                },
                Keterangan: {
                    required: true
                },
                Email: {
                    email: true
                }
            },
            messages: {
                Email: {
                    email : "Format email salah"
                }
            },

            highlight: function (element) {
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            },
            unhighlight: function (element) {
                $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function (error, element) {
                if (element.is('textarea')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                } else if (element.is(':radio')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                }
                else if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                }
                else {
                    error.insertAfter(element);
                }
            }
        });
        $.validator.messages.required = "Harap isi field ini terlebih dahulu!";

        //check apakah form sudah valid atau belum
        $('#BtnSubmitUser').click(function () {
            $("#ProjectId").val(ProjectId);
            var textareaValue = $('#Keterangan').summernote('code');
            $("#Keterangan").val(textareaValue);
            var urlClient = '';
            var $valid = $("#FormDataClient").valid();
            if (!$valid) {
                $validator.focusInvalid();
                return false;
            } else {
                if (StateTempClient == "edit") {
                    urlClient = '../DetailProject/SubmitEditClient';
                }
                else {
                    urlClient = '../DetailProject/SubmitCreateClient'
                }
                $.ajax({
                    url: urlClient,
                    type: 'POST',
                    data: $('#FormDataClient').serialize(),
                    success: function (d) {
                        //Tampilkan alert status
                        if (d == "") {
                            $('#ModalForm').modal('hide');
                            NotifikasiSukses("Sukses", "Data berhasil disimpan!");
                            TableClient.ajax.reload();
                        } else {
                            NotifikasiError("Error", d)
                        }
                    }
                });
            }
        });
    }


    //*************************************************************RELASI PROJECT *******************************************************//
    //------------------------------------------------------------------------DATA RELASI PROJECT--------------------------------------------------------//
    function CreateRelasiProject() {
        ShowModal('bd-example-modal-lg');
        StateTempRelasiProject = "create";
        UrlPartialView = '../DetailProject/CreateDepedencyProject';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');
                        //StateTempClient = "create";
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        ValidationFormRelasiProject();
                        DropdownAllProjectServerSide("RelasiProjectId", "100", false)
                        $('#Keterangan').summernote({
                            placeholder: 'Masukkan Keterangan',
                            height: 300,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });
                        $("#Keterangan").summernote("code", "");

                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function EditRelasiProject(Id) {
        ShowModal('bd-example-modal-lg');
        StateTempRelasiProject = "edit";
        SearchData = { "Id": Id };
        UrlPartialView = '../DetailProject/EditDepedencyProject';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');
                        //StateTempClient = "create";
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        ValidationFormRelasiProject();
                        DropdownAllProjectServerSide("RelasiProjectId", "100", false)
                        $('#Keterangan').summernote({
                            placeholder: 'Masukkan Keterangan',
                            height: 300,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });

                    }, SearchData);
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function ViewRelasiProject(Id) {
        ShowModal('bd-example-modal-lg');
        StateTempRelasiProject = "view";
        SearchData = { "Id": Id };
        UrlPartialView = '../DetailProject/ViewDepedencyProject';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');
                        //StateTempClient = "create";
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        $('#Keterangan').summernote({
                            placeholder: 'Masukkan Keterangan',
                            height: 300,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });
                        $('#Keterangan').summernote('disable');
                        $("#FormDataRelasiProject :input").prop("disabled", true);
                        $('#BtnSubmitRelasiProject').hide();


                    }, SearchData);
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    //Untuk Validasi Form data Pinjaman
    function ValidationFormRelasiProject() {
        //Untuk validasi form
        var $validator = $("#FormDataRelasiProject").validate({
            ignore: [],
            rules: {
                RelasiProjectId: {
                    required: true
                },
                Keterangan: {
                    required: true
                }
            },
            messages: {

            },

            highlight: function (element) {
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            },
            unhighlight: function (element) {
                $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function (error, element) {
                if (element.is('textarea')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                } else if (element.is(':radio')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                }
                else if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                }
                else {
                    error.insertAfter(element);
                }
            }
        });
        $.validator.messages.required = "Harap isi field ini terlebih dahulu!";

        //check apakah form sudah valid atau belum
        $('#BtnSubmitRelasiProject').click(function () {
            $("#ProjectId").val(ProjectId);
            var Url = '';
            var textareaValue = $('#Keterangan').summernote('code');
            $("#Keterangan").val(textareaValue);
            var $valid = $("#FormDataRelasiProject").valid();
            if (!$valid) {
                $validator.focusInvalid();
                return false;
            } else {
                if (StateTempRelasiProject == "edit") {
                    Url = '../DetailProject/SubmitEditDepedencyProject';
                }
                else {
                    Url = '../DetailProject/SubmitCreateDepedencyProject'
                }
                $.ajax({
                    url: Url,
                    type: 'POST',
                    data: $('#FormDataRelasiProject').serialize(),
                    success: function (d) {
                        //Tampilkan alert status
                        if (d == "") {
                            $('#ModalForm').modal('hide');
                            NotifikasiSukses("Sukses", "Data berhasil disimpan!");
                            TableRelasiProject.ajax.reload();
                        } else {
                            NotifikasiError("Error", d)
                        }
                    }
                });
            }
        });
    }

    //--***************************************START DELETE ******************************************//
    function DeleteRelasiProject(Id) {
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    listSelected = [];
                    State = "delete";
                    swal({
                        title: "Konfirmasi",
                        text: "Apakah Anda yakin ingin menghapus data ini?",
                        icon: "warning",
                        buttons: true,
                        dangerMode: true,
                    })
                        .then((willDelete) => {
                            if (willDelete) {
                                $.ajax({
                                    url: '../DetailProject/DeleteDepedencyProject',
                                    type: 'POST',
                                    data: { "Ids": Id },
                                    success: function (d) {
                                        if (d == "") {
                                            NotifikasiSukses("Sukses", "Data berhasil dihapus!");
                                        } else {
                                            NotifikasiError("Error", "Data gagal dihapus!")
                                        }
                                        TableRelasiProject.ajax.reload();
                                    }
                                });
                            }
                        });
                    return false;
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });


        
    }
    //--***************************************END DELETE ******************************************//


    //------------------------------------------------------------------------DATA ANGGOTA TIM--------------------------------------------------------//
    function CreateAnggotaTim() {
        ShowModal('bd-example-modal-lg');
        StateTempAnggotaTim = "create";
        UrlPartialView = '../DetailProject/CreateAnggotaTim';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');
                        //StateTempClient = "create";
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        ValidationFormAnggotaTim();
                        //CreateContentTanggal("TanggalTargetPenyelesaianAnggotaTim");
                        //AdvanceDateRangePicker('TanggalTargetPenyelesaianAnggotaTim');
                        var PeriodeEstimasiProject = $("#TanggalEstimasiDone").val();
                        var PeriodeSearchSplitArray = PeriodeEstimasiProject.split("-");

                        RangeDateDefault('TanggalTargetPenyelesaianAnggotaTim', PeriodeSearchSplitArray[0].split(' ').join(''), PeriodeSearchSplitArray[1].split(' ').join(''));

                        DropdownDataJobPositionServerSide("JobPositionId", "100", false);
                        DropdownDataAllPegawaiServerSide("PegawaiId", "100", false);
                        //$('input[name="TanggalTargetPenyelesaianAnggotaTim"]').daterangepicker();
                        $('#Keterangan').summernote({
                            placeholder: 'Masukkan Deskripsi Kerjaan',
                            height: 300,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });
                        $("#Keterangan").summernote("code", "");
                        $("input[name=SendAsTask][value=1]").prop("checked", true);

                        //DropdownAllProjectServerSide("RelasiProjectId", "100", false)

                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function EditAnggotaTim(Id) {
        ShowModal('bd-example-modal-lg');
        StateTempAnggotaTim = "edit";
        SearchData = { "Id": Id };
        UrlPartialView = '../DetailProject/EditAnggotaTim';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');
                        //StateTempClient = "create";
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        ValidationFormAnggotaTim();
                        //CreateContentTanggal("TanggalTargetPenyelesaianAnggotaTim");
                        //AdvanceDateRangePicker('TanggalTargetPenyelesaianAnggotaTim');
                        //RangeDateDefaultDefaultValue('TanggalTargetPenyelesaianAnggotaTim');
                        var PeriodeEstimasiProject = $("#TanggalEstimasiDone").val();
                        var PeriodeSearchSplitArray = PeriodeEstimasiProject.split("-");

                        RangeDateDefaultDefaultValue('TanggalTargetPenyelesaianAnggotaTim', PeriodeSearchSplitArray[0].split(' ').join(''), PeriodeSearchSplitArray[1].split(' ').join(''));

                        DropdownDataJobPositionServerSide("JobPositionId", "100", false);
                        DropdownDataAllPegawaiServerSide("PegawaiId", "100", false);
                        //$('input[name="TanggalTargetPenyelesaianAnggotaTim"]').daterangepicker();
                        $('#Keterangan').summernote({
                            placeholder: 'Masukkan Deskripsi Kerjaan',
                            height: 300,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });
                        $("input[name=SendAsTask][value=True]").prop("checked", true);

                        //DropdownAllProjectServerSide("RelasiProjectId", "100", false)

                    }, SearchData);
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function ViewAnggotaTim(Id) {
        ShowModal('bd-example-modal-lg');
        StateTempAnggotaTim = "view";
        SearchData = { "Id": Id };
        UrlPartialView = '../DetailProject/ViewAnggotaTim';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');
                        //StateTempClient = "create";
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        
                        $('#Keterangan').summernote({
                            placeholder: 'Masukkan Deskripsi Kerjaan',
                            height: 300,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });
                        $("#FormDataAnggotaTim :input").prop("disabled", true);
                        $('#Keterangan').summernote('disable');
                        $('#BtnSubmitAnggotaTim').hide();

                    }, SearchData);
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    function ViewDetailProgressAnggotaTim(ProjectId) {
        ShowModal('bd-example-modal-lg');
        StateTempAnggotaTim = "create";
        UrlPartialView = '../DetailProject/DetailProgressAnggotaTim';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');
                        //StateTempClient = "create";
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        LoadDataTableProgressKerja(ProjectId)
                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    //Untuk Validasi Form data Pinjaman
    function ValidationFormAnggotaTim() {
        //Untuk validasi form
        var $validator = $("#FormDataAnggotaTim").validate({
            ignore: [],
            rules: {
                JobPositionId: {
                    required: true
                },
                PegawaiId: {
                    required: true
                },
                Keterangan: {
                    required: true
                }
            },
            messages: {

            },

            highlight: function (element) {
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            },
            unhighlight: function (element) {
                $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function (error, element) {
                if (element.is('textarea')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                } else if (element.is(':radio')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                }
                else if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                }
                else {
                    error.insertAfter(element);
                }
            }
        });
        $.validator.messages.required = "Harap isi field ini terlebih dahulu!";

        //check apakah form sudah valid atau belum
        $('#BtnSubmitAnggotaTim').click(function () {
            $("#ProjectId").val(ProjectId);
            var urlClient = '';
            var $valid = $("#FormDataAnggotaTim").valid();
            var textareaValue = $('#Keterangan').summernote('code');
            $("#Keterangan").val(textareaValue);
            if (!$valid) {
                $validator.focusInvalid();
                return false;
            } else {
                if (StateTempAnggotaTim == "edit") {
                    urlClient = '../DetailProject/SubmitEditAnggotaTim';
                }
                else {
                    urlClient = '../DetailProject/SubmitCreateAnggotaTim'
                }
                $.ajax({
                    url: urlClient,
                    type: 'POST',
                    data: $('#FormDataAnggotaTim').serialize(),
                    success: function (d) {
                        //Tampilkan alert status
                        if (d == "") {
                            $('#ModalForm').modal('hide');
                            NotifikasiSukses("Sukses", "Data berhasil disimpan!");
                            TableAnggotaTim.ajax.reload();
                        } else {
                            NotifikasiError("Error", d)
                        }
                    }
                });
            }
        });
    }



    //--***************************************START DELETE ******************************************//
    function DeleteAnggotaTim(Id) {
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    listSelected = [];
                    State = "delete";
                    swal({
                        title: "Konfirmasi",
                        text: "Apakah Anda yakin ingin menghapus data ini?",
                        icon: "warning",
                        buttons: true,
                        dangerMode: true,
                    })
                        .then((willDelete) => {
                            if (willDelete) {
                                $.ajax({
                                    url: '../DetailProject/DeleteAnggotaTim',
                                    type: 'POST',
                                    data: { "Ids": Id },
                                    success: function (d) {
                                        if (d == "") {
                                            NotifikasiSukses("Sukses", "Data berhasil dihapus!");
                                        } else {
                                            NotifikasiError("Error", "Data gagal dihapus!")
                                        }
                                        TableAnggotaTim.ajax.reload();
                                    }
                                });
                            }
                        });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });


        
        return false;
    }
    //--***************************************END DELETE ******************************************//

    //------------------------------------------------------------------------DATA FILE REPOSITORY--------------------------------------------------------//
    function CreateFileRepository() {
        ShowModal('bd-example-modal-lg');
        StateTempAnggotaTim = "create";
        UrlPartialView = '../DetailProject/CreateFileRepository';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');
                        //StateTempClient = "create";
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        ValidationFormFileRepository();
                        
                        $('#Keterangan').summernote({
                            placeholder: 'Masukkan Deskripsi Kerjaan',
                            height: 300,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });
                        $("#Keterangan").summernote("code", "");

                        $('.dropify').dropify({

                        });
                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    //Untuk Validasi Form data Pinjaman
    function ValidationFormFileRepository() {
        //Untuk validasi form
        var $validator = $("#FormDataFileRepository").validate({
            ignore: [],
            rules: {
                TypeDokumenId: {
                    required: true
                },
                File: {
                    required: true
                },
                Keterangan: {
                    required: true
                }
            },
            messages: {

            },

            highlight: function (element) {
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            },
            unhighlight: function (element) {
                $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function (error, element) {
                if (element.is('textarea')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                } else if (element.is(':radio')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                } else if (element.is(':file')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                }
                else if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                }
                else {
                    error.insertAfter(element);
                }
            }
        });
        $.validator.messages.required = "Harap isi field ini terlebih dahulu!";

        //check apakah form sudah valid atau belum
        $('#BtnSubmitFileRepository').click(function () {
            $("#ProjectId").val(ProjectId);
            var url = '../DetailProject/SubmitCreateFileRepository';
            var $valid = $("#FormDataFileRepository").valid();
            var textareaValue = $('#Keterangan').summernote('code');
            $("#Keterangan").val(textareaValue);
            if (!$valid) {
                $validator.focusInvalid();
                return false;
            } else {
                var fd = $("#FormDataFileRepository")[0];
                $.ajax(
                    {
                        url: url,
                        data: new FormData(fd),
                        mimeType: "multipart/form-data",
                        processData: false,
                        contentType: false,
                        type: "POST",
                        success: function (data) {
                            if (data == "") {
                                NotifikasiSukses("Sukses", "Data berhasil disimpan!");
                                $('#ModalForm').modal('hide');
                                TableFileRepository.ajax.reload();
                              
                            }
                            else {
                                NotifikasiError("Error", data)
                            }
                        },
                        error: function (xhr, status, error) {
                            swal("error", error, "warning");
                        }
                    }
                );
            }
        });
    }

    //--***************************************START DELETE ******************************************//
    function DeleteFileRepository(Id) {
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    listSelected = [];
                    State = "delete";
                    swal({
                        title: "Konfirmasi",
                        text: "Apakah Anda yakin ingin menghapus data ini?",
                        icon: "warning",
                        buttons: true,
                        dangerMode: true,
                    })
                        .then((willDelete) => {
                            if (willDelete) {
                                $.ajax({
                                    url: '../DetailProject/DeleteFileRepository',
                                    type: 'POST',
                                    data: { "Ids": Id },
                                    success: function (d) {
                                        if (d == "") {
                                            NotifikasiSukses("Sukses", "Data berhasil dihapus!");
                                        } else {
                                            NotifikasiError("Error", "Data gagal dihapus!")
                                        }
                                        TableFileRepository.ajax.reload();
                                    }
                                });
                            }
                        });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                    return false;
                }
            }
        });


        
    }
    //--***************************************END DELETE ******************************************//

   
    function DownloadFileRepository(Id) {
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    var popup = window.open('../DetailProject/DownloadFile?Id=' + Id, '_blank');
                    popupBlockerChecker.check(popup);
                }
                else {
                    window.location.href = "../Account/Login?a=true";
                }
            }
        });
    }


    //------------------------------------------------------------------------DATA NOTES--------------------------------------------------------//
    function CreateNotes() {
        ShowModal('bd-example-modal-lg');
        StateTempNotes = "create";
        UrlPartialView = '../DetailProject/CreateNotes';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');
                        //StateTempClient = "create";
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        ValidationFormNotes();

                        $('#Notes').summernote({
                            placeholder: 'Masukkan Deskripsi Kerjaan',
                            height: 300,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });
                        $("#Notes").summernote("code", "");
                        
                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }


    //------------------------------------------------------------------------DATA NOTES--------------------------------------------------------//
    function EditNotes(Id) {
        ShowModal('bd-example-modal-lg');
        StateTempNotes = "edit";
        UrlPartialView = '../DetailProject/EditNotes';
        //Cek session masih aktif atau tidak
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    SearchData = {"Id": Id}
                    LoadPartialViewData(UrlPartialView, function (data) {
                        //ShowModal('bd-example-modal-lg');
                        //StateTempClient = "create";
                        var modalbody = $('#LoadContent');
                        modalbody.html(data);
                        $('#ModalForm').modal({
                            backdrop: 'static',
                            keyboard: false
                        });
                        ValidationFormNotes();

                        $('#Notes').summernote({
                            placeholder: 'Masukkan Deskripsi Kerjaan',
                            height: 300,
                            toolbar: [
                                ['style', ['style']],
                                ['font', ['bold', 'underline', 'clear']],
                                ['color', ['color']],
                                ['para', ['ul', 'ol', 'paragraph']],
                                ['table', ['table']],
                                ['insert', ['link', 'picture', 'video']],
                                ['view', ['fullscreen', 'codeview', 'help']]
                            ]
                        });

                    }, SearchData);
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

    //Untuk Validasi Form data Pinjaman
    function ValidationFormNotes() {
        //Untuk validasi form
        var $validator = $("#FormDataNotes").validate({
            ignore: [],
            rules: {
                Notes: {
                    required: true
                },
                Judul: {
                    required: true
                }
            },
            messages: {

            },

            highlight: function (element) {
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            },
            unhighlight: function (element) {
                $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function (error, element) {
                if (element.is('textarea')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                } else if (element.is(':radio')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                } else if (element.is(':file')) {
                    element.next().css('border', '1px solid red');
                    error.insertAfter(element.parent());
                }
                else if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                }
                else {
                    error.insertAfter(element);
                }
            }
        });
        $.validator.messages.required = "Harap isi field ini terlebih dahulu!";

        //check apakah form sudah valid atau belum
        $('#BtnSubmitNotes').click(function () {
            $("#ProjectId").val(ProjectId);
            var url = '';
            var $valid = $("#FormDataNotes").valid();
            var textareaValue = $('#Keterangan').summernote('code');
            $("#Keterangan").val(textareaValue);
            if (!$valid) {
                $validator.focusInvalid();
                return false;
            } else {
                if (StateTempNotes == "edit") {
                    url = '../DetailProject/SubmitEditNotes';
                }
                else {
                    url = '../DetailProject/SubmitCreateNotes'
                }
                var fd = $("#FormDataNotes")[0];
                $.ajax(
                    {
                        url: url,
                        data: new FormData(fd),
                        mimeType: "multipart/form-data",
                        processData: false,
                        contentType: false,
                        type: "POST",
                        success: function (data) {
                            if (data == "") {
                                NotifikasiSukses("Sukses", "Data berhasil disimpan!");
                                $('#ModalForm').modal('hide');
                                TableNotes.ajax.reload();

                            }
                            else {
                                NotifikasiError("Error", data)
                            }
                        },
                        error: function (xhr, status, error) {
                            swal("error", error, "warning");
                        }
                    }
                );
            }
        });
    }

    //--***************************************START DELETE ******************************************//
    function DeleteNotes(Id) {
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    listSelected = [];
                    State = "delete";
                    swal({
                        title: "Konfirmasi",
                        text: "Apakah Anda yakin ingin menghapus data ini?",
                        icon: "warning",
                        buttons: true,
                        dangerMode: true,
                    })
                        .then((willDelete) => {
                            if (willDelete) {
                                $.ajax({
                                    url: '../DetailProject/DeleteNotes',
                                    type: 'POST',
                                    data: { "Ids": Id },
                                    success: function (d) {
                                        if (d == "") {
                                            NotifikasiSukses("Sukses", "Data berhasil dihapus!");
                                        } else {
                                            NotifikasiError("Error", "Data gagal dihapus!")
                                        }
                                        TableNotes.ajax.reload();
                                    }
                                });
                            }
                        });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                    return false;
                }
            }
        });


        
    }
    //--***************************************END DELETE ******************************************//

    function GetAllDataLog() {
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    $.ajax({
                        type: 'GET',
                        url: '../Login/CekSession',
                        success: function (hasil) {
                            if (hasil == true) {
                                $.ajax({
                                    url: "../DetailProject/LoadDataProjectLog",
                                    type: 'POST',
                                    data: { "ProjectId": ProjectId },
                                    success: function (d) {
                                        if (d != null) {
                                            $.each(d, function (index, value) {
                                                console.log(value)
                                                $('#DivListTracking').append('<div class="tracking-item">'+
                                                    '<div class="tracking-icon status-intransit">' +
                                                        '<svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle" role="img" viewBox="0 0 512 512" data-fa-i2svg="">'+
                                                            '<path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>'+
                                                        '</svg>'+
                                                        '<!-- <i class="fas fa-circle"></i> -->'+
                                                    '</div>'+
                                                    '<div class="tracking-date">' + value.CreatedTime + '<span>' + value.Time+'</span></div>'+
                                                    '<div class="tracking-content">' + value.CreatedBy + ' - ( ' + value.NamaActivity + ' )<span>' + value.Keterangan +'</span> <span>' + value.Komentar+'</span></div>'+
                                                '</div>');
                                            });
                                        }
                                    }
                                });
                            }
                            else {
                                window.location.href = "../Login/Login?a=true";
                            }
                        }
                    });
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }


    function LoadDataTableProgressKerja(ProjectId) {
        $.ajax({
            type: 'GET',
            url: '../Login/CekSession',
            success: function (hasil) {
                if (hasil == true) {
                    if (TableProgressKerja != undefined) {
                        TableProgressKerja.destroy();
                    }
                    TableProgressKerja = $('#TableProgress').DataTable({
                        fixedHeader: {
                            header: true
                        },
                        pageLength: 10,
                        destroy: true,
                        orderCellsTop: true,
                        responsive: true,
                        processing: true, // untuk menampilkan bar prosessing
                        serverSide: true, // untuk proses server side datatable harus diset true
                        orderMulti: false, // untuk disable multi order column
                        retrieve: true,
                        //autoWidth: true,
                        dom: '<"top"i>rt<"bottom"lp><"clear">', // untuk menghilangkan search global
                        //data: data,
                        ajax: {
                            "url": '../Utility/LoadDataProgressKerjaMember',
                            "type": "POST",
                            "datatype": "json",
                            "data": { "ProjectMemberId": ProjectId },
                            error: function (jqXHR, textStatus, errorThrown) {
                                window.location.href = "../Error/HttpStatusErrorLayout?statusCode=500"
                            }
                        },
                        language: {
                            processing: '<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span> ',
                            info: "Menampilkan _START_ Sampai _END_ Dari _TOTAL_ Data",
                            paginate: {
                                first: "Halaman Awal",
                                last: "Halaman Akhir",
                                previous: "Halaman Sebelumnya",
                                next: "Halaman Selanjutnya",
                            },
                            lengthMenu: "Menampilkan _MENU_ Data",
                            emptyTable: "Data tidak ditemukan",
                            infoEmpty: "Menampilkan 0 Sampai 0 Dari 0 Data",
                            zeroRecords: "Data tidak ditemukan"
                        },
                        columns: [
                            { responsivePriority: 1, "data": "Number", "name": "Number" },
                            { responsivePriority: 5, "data": "Tanggal", "name": "Tanggal" },
                            { responsivePriority: 3, "data": "Judul", "name": "Judul" },
                            { responsivePriority: 4, "data": "Deskripsi", "name": "Deskripsi" }
                        ],
                        "order": [[1, "desc"]]
                    });

                    //$.fn.dataTable.ext.errMode = 'throw';

                    //--------------------------Function untuk melempar parameter search ---------------------//
                    //Untuk melempar parameter search
                    //oTable = $('#Table').DataTable();
                    $('#BtnSearch').click(function () {
                        TableProgressKerja.columns(2).search($('#txtTipeSearchParam').val().trim());
                        TableProgressKerja.columns(3).search($('#txtNamaSearchParam').val().trim());


                        //hit search ke server
                        TableProgressKerja.draw();
                    });


                    //---------------------Function untuk reset data pencarian----------------//
                    $('#BtnClearSearch').click(function () {
                        $('#txtTipeSearchParam').val("");
                        $('#txtNamaSearchParam').val("");

                        TableProgressKerja.columns(2).search($('#txtTipeSearchParam').val().trim());
                        TableProgressKerja.columns(3).search($('#txtNamaSearchParam').val().trim());
                        //hit search ke server
                        TableProgressKerja.draw();
                    });

                    TableProgressKerja.columns.adjust().responsive.recalc();
                }
                else {
                    window.location.href = "../Login/Login?a=true";
                }
            }
        });
    }

</script>